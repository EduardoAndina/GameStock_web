<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      lang="pt-br">

<head>
    <meta charset="UTF-8">
    <title>GameStock | Jogos</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

    <link rel="stylesheet" href="/css/sistema.css">
</head>

<body>

<div class="sidebar">
    <h2>GAMESTOCK</h2>

    <a th:href="@{/jogos}" class="active">
        <i class="bi bi-controller"></i> Jogos
    </a>

    <a th:href="@{/funcionarios}">
        <i class="bi bi-people"></i> Funcionários
    </a>

    <a th:href="@{/vendas}">
        <i class="bi bi-cash-coin"></i> Vendas
    </a>

    <a th:href="@{/logout}">
        <i class="bi bi-box-arrow-right"></i> Sair
    </a>
</div>

<div class="main">

    <div class="hero">
        <h1>Jogos</h1>
        <p>Gerencie e acompanhe todos os jogos cadastrados no sistema</p>
    </div>

    <div class="card">

        <div class="table-header">
            <h5>Lista de Jogos</h5>

            <div class="search-box-wrapper">
                <i class="bi bi-search"></i>
                <input type="text"
                       class="form-control search-box"
                       placeholder="Pesquisar jogo"
                       id="buscaPrincipal">
            </div>
        </div>

        <div class="table-wrapper">
            <table class="table table-hover align-middle" id="tabelaPrincipal">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Nome</th>
                    <th>Categoria</th>
                    <th>Plataforma</th>
                    <th>Preço</th>
                    <th>Quantidade</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="jogo : ${jogos}">
                    <td th:text="${jogo.id}"></td>
                    <td th:text="${jogo.nome}"></td>
                    <td th:text="${jogo.categoria}"></td>
                    <td th:text="${jogo.plataforma}"></td>
                    <td th:text="${jogo.preco}"></td>
                    <td th:text="${jogo.quantidade}"></td>
                </tr>
                </tbody>
            </table>
        </div>

        <div class="action-bar">
            <button class="btn btn-success" onclick="abrirModalCadastrar()">
                <i class="bi bi-plus-circle"></i> Cadastrar
            </button>

            <button class="btn btn-primary" onclick="abrirModalEditar()">
                <i class="bi bi-pencil-square"></i> Editar
            </button>

            <button class="btn btn-danger" onclick="abrirModalExcluir()">
                <i class="bi bi-trash"></i> Excluir
            </button>
        </div>

    </div>
</div>

<div id="modalCadastrar" class="modal-overlay">
    <div class="modal-box">
        <div class="modal-header">
            <h2>Cadastrar Jogo</h2>
            <button class="close-btn" onclick="fecharTodos()">&times;</button>
        </div>

        <form th:action="@{/jogos/salvar}" method="post" class="modal-body">
            <label>Nome</label>
            <input type="text" name="nome" class="modal-input" required>

            <label>Categoria</label>
            <input type="text" name="categoria" class="modal-input" required>

            <label>Plataforma</label>
            <input type="text" name="plataforma" class="modal-input" required>

            <label>Preço</label>
            <input type="number" step="0.01" name="preco" class="modal-input" required>

            <label>Quantidade</label>
            <input type="number" name="quantidade" class="modal-input" required>

            <button class="btn-salvar">Salvar</button>
        </form>
    </div>
</div>

<div id="modalEditar" class="modal-overlay">
    <div class="modal-box modal-grande">

        <div class="modal-header">
            <h2>Editar Jogo</h2>
            <button class="close-btn" onclick="fecharTodos()">&times;</button>
        </div>

        <div class="modal-body">

            <div class="search-box-wrapper mb-3">
                <i class="bi bi-search"></i>
                <input type="text"
                       class="form-control search-box"
                       placeholder="Pesquisar jogo"
                       id="buscaEditar">
            </div>

            <div class="table-wrapper modal-table-wrapper">
                <table class="table table-hover" id="tabelaEditarJogos">
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nome</th>
                        <th>Categoria</th>
                        <th>Plataforma</th>
                        <th>Preço</th>
                        <th>Qtd</th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="jogo : ${jogos}">
                        <td th:text="${jogo.id}"></td>
                        <td th:text="${jogo.nome}"></td>
                        <td th:text="${jogo.categoria}"></td>
                        <td th:text="${jogo.plataforma}"></td>
                        <td th:text="${jogo.preco}"></td>
                        <td th:text="${jogo.quantidade}"></td>
                        <td>
                            <button class="btn btn-sm btn-primary"
                                    onclick="selecionarJogoParaEditar(this)">
                                Selecionar
                            </button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <div class="editar-grid">
                <input id="editarId" class="modal-input" readonly placeholder="ID">
                <input id="editarNome" class="modal-input" placeholder="Nome">
                <input id="editarCategoria" class="modal-input" placeholder="Categoria">
                <input id="editarPlataforma" class="modal-input" placeholder="Plataforma">
                <input id="editarPreco" class="modal-input" placeholder="Preço">
                <input id="editarQuantidade" class="modal-input" placeholder="Quantidade">
            </div>

            <button class="btn-salvar mt-3" onclick="salvarEdicao()">Atualizar</button>
        </div>
    </div>
</div>

<div id="modalExcluir" class="modal-overlay">
    <div class="modal-box modal-grande">

        <div class="modal-header">
            <h2>Excluir Jogo</h2>
            <button class="close-btn" onclick="fecharTodos()">&times;</button>
        </div>

        <div class="modal-body">

            <div class="search-box-wrapper mb-3">
                <i class="bi bi-search"></i>
                <input type="text"
                       class="form-control search-box"
                       placeholder="Pesquisar jogo"
                       id="buscaExcluir">
            </div>

            <table class="table table-hover" id="tabelaExcluirJogos">
                <tbody>
                <tr th:each="jogo : ${jogos}">
                    <td th:text="${jogo.id}"></td>
                    <td th:text="${jogo.nome}"></td>
                    <td>
                        <button class="btn btn-danger btn-sm"
                                onclick="selecionarJogoParaExcluir(this)">
                            Selecionar
                        </button>
                    </td>
                </tr>
                </tbody>
            </table>

            <button class="btn-salvar mt-3" onclick="confirmarExclusao()">Excluir</button>
        </div>
    </div>
</div>

<form id="formEditar" th:action="@{/jogos/editar}" method="post">
    <input type="hidden" id="formEditarId" name="id">
    <input type="hidden" id="formEditarNome" name="nome">
    <input type="hidden" id="formEditarCategoria" name="categoria">
    <input type="hidden" id="formEditarPlataforma" name="plataforma">
    <input type="hidden" id="formEditarPreco" name="preco">
    <input type="hidden" id="formEditarQuantidade" name="quantidade">
</form>

<form id="formExcluir" th:action="@{/jogos/excluir}" method="post">
    <input type="hidden" id="formExcluirId" name="id">
</form>

<script src="jogos.js"></script>

</body>
</html>











